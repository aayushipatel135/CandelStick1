<html>
<head>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <py-config>
        packages = ['plotly','numpy','pandas']
        plugins = ["https://pyscript.net/latest/plugins/python/py_tutor.py"]
        [[fetch]]
        files = ["./data.csv"]
    </py-config>
</head>
<body>
    <div id="chart1" ></div>
    <py-script>
                import js, json, plotly
                import plotly.graph_objects as go
                import pandas as pd

                df = pd.read_csv("data.csv")
                df = df.set_index(pd.DatetimeIndex(df['Date']))
        
                fig = go.Figure(
                    	data = [
                        	go.Candlestick(
                            	x = df.index,
                            	low = df['Low'],
                            	high = df['High'],
                            	close = df['Adj Close'],
                            	open = df['Open'],
                            	increasing_line_color = 'green',
                            	decreasing_line_color = 'red'
                        	)
                        	]
                )

                fig.update_layout(
                    title="Stock Price",
                    xaxis_title="Date",
                    yaxis_title="Price",
                    autosize=False,
                    width=1800,
                    height=800,
                    margin=dict(l=30,r=30,b=30,
                                t=30,pad=3
                                ),
                    paper_bgcolor="white",
                )
 

                graphJSON = json.dumps(fig, cls=plotly.utils.PlotlyJSONEncoder)
                plot = js.Plotly.newPlot("chart1", js.JSON.parse(graphJSON))

         
    </py-script>
</body>
</html>
