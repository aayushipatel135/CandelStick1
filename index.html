<html>
<head>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <py-config>
        packages = ['plotly','numpy','pandas']
        plugins = ["https://pyscript.net/latest/plugins/python/py_tutor.py"]
        [[fetch]]
        files = ["./data.csv"]
    </py-config>
</head>
<body>
    <div id="chart1" ></div>
    <py-script>
                import js, json, plotly
                import plotly.graph_objects as go
                import pandas as pd

                df = pd.read_csv("data.csv")
                df = df.set_index(pd.DatetimeIndex(df['Date']))

                layout = go.Layout(
                    autosize=False,
                    height=100,
                
                    xaxis= go.layout.XAxis(linecolor = 'black',
                                          linewidth = 1,
                                          mirror = True),
                
                    yaxis= go.layout.YAxis(linecolor = 'black',
                                          linewidth = 1,
                                          mirror = True),
                
                    margin=go.layout.Margin(
                        l=50,
                        r=50,
                        b=100,
                        t=100,
                        pad = 4
                )
        
                fig = go.Figure(
                    	data = [
                        	go.Candlestick(
                            	x = df.index,
                            	low = df['Low'],
                            	high = df['High'],
                            	close = df['Adj Close'],
                            	open = df['Open'],
                            	increasing_line_color = 'green',
                            	decreasing_line_color = 'red'
                        	)
                        	]
                )

                graphJSON = json.dumps(fig, cls=plotly.utils.PlotlyJSONEncoder)
                plot = js.Plotly.newPlot("chart1", js.JSON.parse(graphJSON))

         
    </py-script>
</body>
</html>
