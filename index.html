<html>
<head>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
    <py-config>
        packages = ['plotly','numpy','pandas']
        plugins = [
                              "https://pyscript.net/latest/plugins/python/py_tutor.py"
                            ]
    </py-config>
</head>
<body>
    <div id="helloDiv"></div>
    <button id="my-button" py-onClick="display_hello()">Click me</button>
    <div id="chart1"></div>
    <py-script>
                import js, json, plotly
                import plotly.graph_objects as go
                
                def select_params(trace, points, selector):
                    display('Hello, World!', target="helloDiv")
                
                def display_hello():
                    # this fails because we don't have any implicit target
                    # from event handlers
                    display('hello', target="helloDiv")

                fig = go.Figure(data=go.Scatter(x=[1,2, 3], y=[1, 2, 3]))
                figure.data[0].on_click(select_params)
                graphJSON = json.dumps(fig, cls=plotly.utils.PlotlyJSONEncoder)
                plot = js.Plotly.newPlot("chart1", js.JSON.parse(graphJSON))
         
    </py-script>
</body>
</html>


<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <title>Candle Stick Plot</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

  </head>
  <body>
    <div id="plot">  </div>
    <py-tutor>
                <py-config>
                    packages = [
                      "js", "json", "plotly"
                    ]
                    plugins = [
                      "https://pyscript.net/latest/plugins/python/py_tutor.py"
                    ]
                </py-config>
                <py-script output="plot"> 
                    import js, json, plotly
                    import plotly.offline as pyo
                    import plotly.graph_objects as go
                    import pandas as pd
                    df = pd.read_csv("https://gist.githubusercontent.com/awanshrestha/6481638c175e82dc6a91a499a8730057/raw/1791ef1f55f0be268479286284a0452129371003/TSMC.csv")
                    df = df.set_index(pd.DatetimeIndex(df['Date']))
                    figure = go.Figure(
                        data = [
                            go.Candlestick(
                                x = df.index,
                                low = df['Low'],
                                high = df['High'],
                                close = df['Adj Close'],
                                open = df['Open'],
                                increasing_line_color = 'green',
                                decreasing_line_color = 'red'
                            )
                            ]
                    )
                    Plotly.newPlot(plot,figure);
            <!--         figure.show() -->
            <!--         js.plot(figure.to_json(), "chart1") -->
            <!--         graphJSON = json.dumps(figure, cls=plotly.utils.PlotlyJSONEncoder)
                    plot = js.Plotly.newPlot("chart1", js.JSON.parse(graphJSON))  -->
                </py-script>
      <py-tutor>
  </body>
</html>
 -->
